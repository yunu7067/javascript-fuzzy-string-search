<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>퍼지 검색</title>
</head>

<body>
  <label>
    검색 :
    <input type="search" id="search" name="search" onkeyup="search(this)" />
  </label>
  <div>
    <h5>결과</h5>
    <ul id="result"></ul>
  </div>
  <script src="./based_unicode/based_unicode.js"></script>
  <script>
    const rawDatas = `[{"순위":1,"행정구역":"서울특별시","지역":"수도권","행정구분":"광역단체","인구":"9,741,383"},
{"순위":2,"행정구역":"부산광역시","지역":"영남권","행정구분":"광역단체","인구":"3,416,918"},
{"순위":3,"행정구역":"인천광역시","지역":"수도권","행정구분":"광역단체","인구":"2,925,967"},
{"순위":4,"행정구역":"대구광역시","지역":"영남권","행정구분":"광역단체","인구":"2,453,041"},
{"순위":5,"행정구역":"대전광역시","지역":"충청권","행정구분":"광역단체","인구":"1,525,849"},
{"순위":6,"행정구역":"광주광역시","지역":"호남권","행정구분":"광역단체","인구":"1,496,172"},
{"순위":7,"행정구역":"경기도 수원시","지역":"수도권","행정구분":"기초단체","인구":"1,193,894"},
{"순위":8,"행정구역":"울산광역시","지역":"영남권","행정구분":"광역단체","인구":"1,147,037"},
{"순위":9,"행정구역":"경기도 고양시","지역":"수도권","행정구분":"기초단체","인구":"1,068,641"},
{"순위":10,"행정구역":"경기도 용인시","지역":"수도권","행정구분":"기초단체","인구":"1,061,440"},
{"순위":11,"행정구역":"경상남도 창원시","지역":"영남권","행정구분":"기초단체","인구":"1,044,579"},
{"순위":12,"행정구역":"경기도 성남시","지역":"수도권","행정구분":"기초단체","인구":"942,649"},
{"순위":13,"행정구역":"충청북도 청주시","지역":"충청권","행정구분":"기초단체","인구":"840,047"},
{"순위":14,"행정구역":"경기도 부천시","지역":"수도권","행정구분":"기초단체","인구":"828,947"},
{"순위":15,"행정구역":"경기도 화성시","지역":"수도권","행정구분":"기초단체","인구":"818,760"},
{"순위":16,"행정구역":"경기도 남양주시","지역":"수도권","행정구분":"기초단체","인구":"702,545"},
{"순위":17,"행정구역":"전라북도 전주시","지역":"호남권","행정구분":"기초단체","인구":"654,963"},
{"순위":18,"행정구역":"충청남도 천안시","지역":"충청권","행정구분":"기초단체","인구":"652,845"},
{"순위":19,"행정구역":"경기도 안산시","지역":"수도권","행정구분":"기초단체","인구":"650,599"},
{"순위":20,"행정구역":"경기도 안양시","지역":"수도권","행정구분":"기초단체","인구":"565,392"},
{"순위":21,"행정구역":"경상남도 김해시","지역":"영남권","행정구분":"기초단체","인구":"542,713"},
{"순위":22,"행정구역":"경기도 평택시","지역":"수도권","행정구분":"기초단체","인구":"514,876"},
{"순위":23,"행정구역":"경상북도 포항시","지역":"영남권","행정구분":"기초단체","인구":"506,494"},
{"순위":24,"행정구역":"제주특별자치도 제주시","지역":"제주권","행정구분":"행정","인구":"489,202"},
{"순위":25,"행정구역":"경기도 시흥시","지역":"수도권","행정구분":"기초단체","인구":"475,396"},
{"순위":26,"행정구역":"경기도 파주시","지역":"수도권","행정구분":"기초단체","인구":"453,961"},
{"순위":27,"행정구역":"경기도 의정부시","지역":"수도권","행정구분":"기초단체","인구":"451,876"},
{"순위":28,"행정구역":"경기도 김포시","지역":"수도권","행정구분":"기초단체","인구":"437,789"},
{"순위":29,"행정구역":"경상북도 구미시","지역":"영남권","행정구분":"기초단체","인구":"419,761"},
{"순위":30,"행정구역":"경기도 광주시","지역":"수도권","행정구분":"기초단체","인구":"373,274"},
{"순위":31,"행정구역":"경상남도 양산시","지역":"영남권","행정구분":"기초단체","인구":"351,168"},
{"순위":32,"행정구역":"강원도 원주시","지역":"강원권","행정구분":"기초단체","인구":"350,252"},
{"순위":33,"행정구역":"경상남도 진주시","지역":"영남권","행정구분":"기초단체","인구":"347,489"},
{"순위":34,"행정구역":"세종특별자치시","지역":"충청권","행정구분":"광역단체","인구":"342,328"},
{"순위":35,"행정구역":"경기도 광명시","지역":"수도권","행정구분":"기초단체","인구":"328,253"},
{"순위":36,"행정구역":"충청남도 아산시","지역":"충청권","행정구분":"기초단체","인구":"314,238"},
{"순위":37,"행정구역":"전라북도 익산시","지역":"호남권","행정구분":"기초단체","인구":"298,928"},
{"순위":38,"행정구역":"강원도 춘천시","지역":"강원권","행정구분":"기초단체","인구":"283,742"},
{"순위":39,"행정구역":"경상북도 경산시","지역":"영남권","행정구분":"기초단체","인구":"282,626"},
{"순위":40,"행정구역":"경기도 군포시","지역":"수도권","행정구분":"기초단체","인구":"275,989"},
{"순위":41,"행정구역":"전라북도 군산시","지역":"호남권","행정구분":"기초단체","인구":"273,649"},
{"순위":42,"행정구역":"경기도 하남시","지역":"수도권","행정구분":"기초단체","인구":"273,587"},
{"순위":43,"행정구역":"전라남도 여수시","지역":"호남권","행정구분":"기초단체","인구":"271,741"},
{"순위":44,"행정구역":"전라남도 순천시","지역":"호남권","행정구분":"기초단체","인구":"266,809"},
{"순위":45,"행정구역":"경상북도 경주시","지역":"영남권","행정구분":"기초단체","인구":"262,264"},
{"순위":46,"행정구역":"경상남도 거제시","지역":"영남권","행정구분":"기초단체","인구":"257,847"},
{"순위":47,"행정구역":"전라남도 목포시","지역":"호남권","행정구분":"기초단체","인구":"233,948"},
{"순위":48,"행정구역":"경기도 오산시","지역":"수도권","행정구분":"기초단체","인구":"219,877"},
{"순위":49,"행정구역":"경기도 이천시","지역":"수도권","행정구분":"기초단체","인구":"218,798"},
{"순위":50,"행정구역":"강원도 강릉시","지역":"강원권","행정구분":"기초단체","인구":"215,914"},
{"순위":51,"행정구역":"경기도 양주시","지역":"수도권","행정구분":"기초단체","인구":"212,631"},
{"순위":52,"행정구역":"충청북도 충주시","지역":"충청권","행정구분":"기초단체","인구":"212,274"},
{"순위":53,"행정구역":"경기도 안성시","지역":"수도권","행정구분":"기초단체","인구":"198,832"},
{"순위":54,"행정구역":"경기도 구리시","지역":"수도권","행정구분":"기초단체","인구":"189,741"},
{"순위":55,"행정구역":"충청남도 서산시","지역":"충청권","행정구분":"기초단체","인구":"171,364"},
{"순위":56,"행정구역":"제주특별자치도 서귀포시","지역":"제주권","행정구분":"행정","인구":"169,358"},
{"순위":57,"행정구역":"충청남도 당진시","지역":"충청권","행정구분":"기초단체","인구":"168,508"},
{"순위":58,"행정구역":"경상북도 안동시","지역":"영남권","행정구분":"기초단체","인구":"165,704"},
{"순위":59,"행정구역":"경기도 포천시","지역":"수도권","행정구분":"기초단체","인구":"161,239"},
{"순위":60,"행정구역":"경기도 의왕시","지역":"수도권","행정구분":"기초단체","인구":"151,852"},
{"순위":61,"행정구역":"전라남도 광양시","지역":"호남권","행정구분":"기초단체","인구":"144,010"},
{"순위":62,"행정구역":"경상북도 김천시","지역":"영남권","행정구분":"기초단체","인구":"140,765"},
{"순위":63,"행정구역":"충청북도 제천시","지역":"충청권","행정구분":"기초단체","인구":"136,929"},
{"순위":64,"행정구역":"경상남도 통영시","지역":"영남권","행정구분":"기초단체","인구":"132,962"},
{"순위":65,"행정구역":"충청남도 논산시","지역":"충청권","행정구분":"기초단체","인구":"123,774"},
{"순위":66,"행정구역":"경상북도 칠곡군","지역":"영남권","행정구분":"기초단체","인구":"121,778"},
{"순위":67,"행정구역":"경상남도 사천시","지역":"영남권","행정구분":"기초단체","인구":"111,655"},
{"순위":68,"행정구역":"경기도 여주시","지역":"수도권","행정구분":"기초단체","인구":"111,476"},
{"순위":69,"행정구역":"충청남도 공주시","지역":"충청권","행정구분":"기초단체","인구":"111,017"},
{"순위":70,"행정구역":"경기도 양평군","지역":"수도권","행정구분":"기초단체","인구":"109,359"},
{"순위":71,"행정구역":"전라북도 정읍시","지역":"호남권","행정구분":"기초단체","인구":"109,263"},
{"순위":72,"행정구역":"경상북도 영주시","지역":"영남권","행정구분":"기초단체","인구":"108,443"},
{"순위":73,"행정구역":"전라남도 나주시","지역":"호남권","행정구분":"기초단체","인구":"105,579"},
{"순위":74,"행정구역":"충청북도 음성군","지역":"충청권","행정구분":"기초단체","인구":"104,509"},
{"순위":75,"행정구역":"경상남도 밀양시","지역":"영남권","행정구분":"기초단체","인구":"103,894"},
{"순위":76,"행정구역":"충청남도 홍성군","지역":"충청권","행정구분":"기초단체","인구":"103,048"},
{"순위":77,"행정구역":"충청남도 보령시","지역":"충청권","행정구분":"기초단체","인구":"100,922"},
{"순위":78,"행정구역":"전라북도 완주군","지역":"호남권","행정구분":"기초단체","인구":"98,528"},
{"순위":79,"행정구역":"경상북도 상주시","지역":"영남권","행정구분":"기초단체","인구":"98,189"},
{"순위":80,"행정구역":"경상북도 영천시","지역":"영남권","행정구분":"기초단체","인구":"97,675"},
{"순위":81,"행정구역":"경기도 동두천시","지역":"수도권","행정구분":"기초단체","인구":"97,373"},
{"순위":82,"행정구역":"강원도 동해시","지역":"강원권","행정구분":"기초단체","인구":"89,151"},
{"순위":83,"행정구역":"전라북도 김제시","지역":"호남권","행정구분":"기초단체","인구":"82,358"},
{"순위":84,"행정구역":"전라남도 무안군","지역":"호남권","행정구분":"기초단체","인구":"81,420"},
{"순위":85,"행정구역":"전라북도 남원시","지역":"호남권","행정구분":"기초단체","인구":"79,282"},
{"순위":86,"행정구역":"충청북도 진천군","지역":"충청권","행정구분":"기초단체","인구":"79,186"},
{"순위":87,"행정구역":"충청남도 예산군","지역":"충청권","행정구분":"기초단체","인구":"78,678"},
{"순위":88,"행정구역":"강원도 속초시","지역":"강원권","행정구분":"기초단체","인구":"78,618"},
{"순위":89,"행정구역":"경상북도 문경시","지역":"영남권","행정구분":"기초단체","인구":"70,016"},
{"순위":90,"행정구역":"경상남도 함안군","지역":"영남권","행정구분":"기초단체","인구":"67,906"},
{"순위":91,"행정구역":"강원도 삼척시","지역":"강원권","행정구분":"기초단체","인구":"67,860"},
{"순위":92,"행정구역":"강원도 홍천군","지역":"강원권","행정구분":"기초단체","인구":"67,168"},
{"순위":93,"행정구역":"전라남도 해남군","지역":"호남권","행정구분":"기초단체","인구":"67,123"},
{"순위":94,"행정구역":"충청남도 부여군","지역":"충청권","행정구분":"기초단체","인구":"67,028"},
{"순위":95,"행정구역":"경상남도 창녕군","지역":"영남권","행정구분":"기초단체","인구":"62,544"},
{"순위":96,"행정구역":"충청남도 태안군","지역":"충청권","행정구분":"기초단체","인구":"61,170"},
{"순위":97,"행정구역":"전라남도 고흥군","지역":"호남권","행정구분":"기초단체","인구":"60,984"},
{"순위":98,"행정구역":"전라남도 화순군","지역":"호남권","행정구분":"기초단체","인구":"60,566"},
{"순위":99,"행정구역":"경상남도 거창군","지역":"영남권","행정구분":"기초단체","인구":"60,083"},
{"순위":100,"행정구역":"경기도 가평군","지역":"수도권","행정구분":"기초단체","인구":"59,548"},
{"순위":101,"행정구역":"전라남도 영암군","지역":"호남권","행정구분":"기초단체","인구":"57,679"},
{"순위":102,"행정구역":"충청남도 금산군","지역":"충청권","행정구분":"기초단체","인구":"55,672"},
{"순위":103,"행정구역":"전라북도 고창군","지역":"호남권","행정구분":"기초단체","인구":"54,947"},
{"순위":104,"행정구역":"경기도 과천시","지역":"수도권","행정구분":"기초단체","인구":"53,853"},
{"순위":105,"행정구역":"충청남도 서천군","지역":"충청권","행정구분":"기초단체","인구":"53,321"},
{"순위":106,"행정구역":"경상남도 고성군","지역":"영남권","행정구분":"기초단체","인구":"52,439"},
{"순위":107,"행정구역":"전라북도 부안군","지역":"호남권","행정구분":"기초단체","인구":"51,249"},
{"순위":108,"행정구역":"경상북도 의성군","지역":"영남권","행정구분":"기초단체","인구":"50,082"},
{"순위":109,"행정구역":"충청북도 옥천군","지역":"충청권","행정구분":"기초단체","인구":"49,898"},
{"순위":110,"행정구역":"전라남도 영광군","지역":"호남권","행정구분":"기초단체","인구":"49,670"},
{"순위":111,"행정구역":"충청북도 영동군","지역":"충청권","행정구분":"기초단체","인구":"49,034"},
{"순위":112,"행정구역":"경상북도 울진군","지역":"영남권","행정구분":"기초단체","인구":"48,504"},
{"순위":113,"행정구역":"전라남도 완도군","지역":"호남권","행정구분":"기초단체","인구":"48,332"},
{"순위":114,"행정구역":"경상북도 예천군","지역":"영남권","행정구분":"기초단체","인구":"46,321"},
{"순위":115,"행정구역":"강원도 철원군","지역":"강원권","행정구분":"기초단체","인구":"44,770"},
{"순위":116,"행정구역":"강원도 태백시","지역":"강원권","행정구분":"기초단체","인구":"44,733"},
{"순위":117,"행정구역":"경기도 연천군","지역":"수도권","행정구분":"기초단체","인구":"43,990"},
{"순위":118,"행정구역":"전라남도 담양군","지역":"호남권","행정구분":"기초단체","인구":"43,781"},
{"순위":119,"행정구역":"경상남도 합천군","지역":"영남권","행정구분":"기초단체","인구":"43,449"},
{"순위":120,"행정구역":"경상남도 하동군","지역":"영남권","행정구분":"기초단체","인구":"43,441"},
{"순위":121,"행정구역":"강원도 횡성군","지역":"강원권","행정구분":"기초단체","인구":"43,211"},
{"순위":122,"행정구역":"경상남도 남해군","지역":"영남권","행정구분":"기초단체","인구":"42,986"},
{"순위":123,"행정구역":"충청남도 계룡시","지역":"충청권","행정구분":"기초단체","인구":"41,858"},
{"순위":124,"행정구역":"전라남도 장성군","지역":"호남권","행정구분":"기초단체","인구":"41,663"},
{"순위":125,"행정구역":"경상북도 청도군","지역":"영남권","행정구분":"기초단체","인구":"41,278"},
{"순위":126,"행정구역":"경상북도 성주군","지역":"영남권","행정구분":"기초단체","인구":"41,225"},
{"순위":127,"행정구역":"강원도 평창군","지역":"강원권","행정구분":"기초단체","인구":"40,264"},
{"순위":128,"행정구역":"전라남도 보성군","지역":"호남권","행정구분":"기초단체","인구":"39,942"},
{"순위":129,"행정구역":"충청북도 괴산군","지역":"충청권","행정구분":"기초단체","인구":"38,579"},
{"순위":130,"행정구역":"경상남도 함양군","지역":"영남권","행정구분":"기초단체","인구":"37,942"},
{"순위":131,"행정구역":"충청북도 증평군","지역":"충청권","행정구분":"기초단체","인구":"37,625"},
{"순위":132,"행정구역":"강원도 영월군","지역":"강원권","행정구분":"기초단체","인구":"36,934"},
{"순위":133,"행정구역":"전라남도 장흥군","지역":"호남권","행정구분":"기초단체","인구":"36,275"},
{"순위":134,"행정구역":"경상북도 영덕군","지역":"영남권","행정구분":"기초단체","인구":"36,148"},
{"순위":135,"행정구역":"강원도 정선군","지역":"강원권","행정구분":"기초단체","인구":"36,002"},
{"순위":136,"행정구역":"전라남도 신안군","지역":"호남권","행정구분":"기초단체","인구":"35,592"},
{"순위":137,"행정구역":"경상남도 산청군","지역":"영남권","행정구분":"기초단체","인구":"34,033"},
{"순위":138,"행정구역":"전라남도 강진군","지역":"호남권","행정구분":"기초단체","인구":"33,637"},
{"순위":139,"행정구역":"경상북도 고령군","지역":"영남권","행정구분":"기초단체","인구":"33,094"},
{"순위":140,"행정구역":"충청북도 보은군","지역":"충청권","행정구분":"기초단체","인구":"32,253"},
{"순위":141,"행정구역":"충청남도 청양군","지역":"충청권","행정구분":"기초단체","인구":"31,299"},
{"순위":142,"행정구역":"경상북도 봉화군","지역":"영남권","행정구분":"기초단체","인구":"31,082"},
{"순위":143,"행정구역":"전라남도 함평군","지역":"호남권","행정구분":"기초단체","인구":"30,948"},
{"순위":144,"행정구역":"강원도 인제군","지역":"강원권","행정구분":"기초단체","인구":"30,524"},
{"순위":145,"행정구역":"전라남도 진도군","지역":"호남권","행정구분":"기초단체","인구":"29,432"},
{"순위":146,"행정구역":"전라남도 곡성군","지역":"호남권","행정구분":"기초단체","인구":"28,768"},
{"순위":147,"행정구역":"강원도 고성군","지역":"강원권","행정구분":"기초단체","인구":"28,621"},
{"순위":148,"행정구역":"충청북도 단양군","지역":"충청권","행정구분":"기초단체","인구":"28,411"},
{"순위":149,"행정구역":"전라북도 순창군","지역":"호남권","행정구분":"기초단체","인구":"27,017"},
{"순위":150,"행정구역":"전라북도 임실군","지역":"호남권","행정구분":"기초단체","인구":"26,409"},
{"순위":151,"행정구역":"경상남도 의령군","지역":"영남권","행정구분":"기초단체","인구":"26,292"},
{"순위":152,"행정구역":"강원도 양양군","지역":"강원권","행정구분":"기초단체","인구":"25,556"},
{"순위":153,"행정구역":"강원도 화천군","지역":"강원권","행정구분":"기초단체","인구":"24,625"},
{"순위":154,"행정구역":"경상북도 청송군","지역":"영남권","행정구분":"기초단체","인구":"24,441"},
{"순위":155,"행정구역":"전라남도 구례군","지역":"호남권","행정구분":"기초단체","인구":"24,420"},
{"순위":156,"행정구역":"전라북도 무주군","지역":"호남권","행정구분":"기초단체","인구":"23,195"},
{"순위":157,"행정구역":"전라북도 진안군","지역":"호남권","행정구분":"기초단체","인구":"22,998"},
{"순위":158,"행정구역":"강원도 양구군","지역":"강원권","행정구분":"기초단체","인구":"22,355"},
{"순위":159,"행정구역":"경상북도 군위군","지역":"영남권","행정구분":"기초단체","인구":"22,230"},
{"순위":160,"행정구역":"전라북도 장수군","지역":"호남권","행정구분":"기초단체","인구":"21,395"},
{"순위":161,"행정구역":"경상북도 영양군","지역":"영남권","행정구분":"기초단체","인구":"16,579"},
{"순위":162,"행정구역":"경상북도 울릉군","지역":"영남권","행정구분":"기초단체","인구":"8,702"}]`;
    const datas = JSON.parse(rawDatas);
    //console.log(datas.length);

    const searchableDatas = datas.map((item) => new SearchableObject(item));
    //console.log(searchableDatas.length);

    let isRunning = false;
    let haltFlag = false;

    async function search(el) {
      isRunning = true;
      const keyword = el.value;
      if(!keyword.replaceAll(" ", "")) return;
      
      const res = [];
      for await(const item of searchableDatas) {
        (item.search(keyword)) && res.push(item);
        if(haltFlag) {
          haltFlag = isRunning = false;
          break;
        }
      }
      

      const listEl = document.getElementById('result');
      const temp = document.querySelectorAll("#result > li");

      temp.forEach(el => el.remove());

      res.forEach((item) => {
        const li = document.createElement('li');
        li.textContent = JSON.stringify(item);

        listEl.appendChild(li);
      })
    }

  </script>
</body>

</html>